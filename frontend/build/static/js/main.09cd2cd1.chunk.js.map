{"version":3,"sources":["contexts/CurrentUserContext.js","components/ProtectedRoute.js","utils/const.js","components/Header.js","components/Card.js","components/Main.js","components/AuthForm.js","components/Login.js","components/Register.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeletePlacePopup.js","components/ImagePopup.js","components/InfoTooltip.js","components/App.js","utils/useAuth.js","utils/useApiUser.js","utils/useApiCard.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","ProtectedRoute","children","useContext","user","to","replace","baseUrl","Header","onLogout","location","useLocation","pathname","useState","linkDest","setLinkDest","linkTitle","setLinkTitle","menuOpened","setMenuOpened","email","handleLogout","useEffect","renderLink","className","onClick","title","type","Card","card","onCardClick","onCardLike","onCardDelete","isLiked","likes","some","likeHolder","_id","cardLikeButtonClassName","isOwn","owner","cardDeleteButtonClassName","src","link","alt","name","role","length","Main","cards","onEditProfile","onAddPlace","onEditAvatar","avatar","about","map","item","cardId","AuthForm","onSubmit","renderSignInLink","Login","onLogin","setEmail","password","setPassword","buttonTitle","setButtonTitle","buttonRef","useRef","current","disabled","e","preventDefault","err","console","error","errorShow","onChange","target","value","placeholder","required","ref","Register","onRegistration","Footer","currentDate","Date","getFullYear","PopupWithForm","isOpen","onClose","btnCaption","id","evt","currentTarget","EditProfilePopup","onUpdateUser","setName","setAbout","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","setLink","DeletePlacePopup","then","catch","ImagePopup","InfoTooltip","titles","visible","queryApproved","App","isEditProfilePopupState","setIsEditProfilePopupState","isAddPlacePopupState","setIsAddPlacePopupState","isDeletePlacePopupState","setIsDeletePlacePopupState","isEditAvatarPopupState","setIsEditAvatarPopupState","isImgPopupState","setIsImgPopupState","isInfoTooltipState","setIsInfoTooltipState","selectedCard","setSelectedCard","setCards","handleResponse","res","ok","json","Promise","reject","status","signup","fetch","method","headers","body","JSON","stringify","signin","credentials","signout","useAuth","getUserInfo","checkToken","setUserInfo","data","uploadAvatar","useApiUser","getCards","postCard","removeCard","setLike","removeLike","useApiCard","navigate","useNavigate","setUser","userChecked","setUserChecked","start","closeAllPopups","initCards","finally","escHandler","key","document","addEventListener","removeEventListener","handleUpdateUser","newInfo","a","handleUpdateAvatar","handleAddPlaceSubmit","handleDeletePlaceSubmit","filter","handleRegistration","Provider","path","element","login","update","newCard","mappedCard","AddPlacePopup","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.09cd2cd1.chunk.js","sourcesContent":["import React from 'react';\n\nconst CurrentUserContext = React.createContext();\n\nexport default CurrentUserContext;\n","import React, { useContext } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nexport default function ProtectedRoute({ children }) {\n  const { user } = useContext(CurrentUserContext);\n  return user ? children : <Navigate to=\"./signin\" replace />\n}\n","// const baseUrl = 'http://localhost:3001/';\nconst baseUrl = 'https://express-mesto.herokuapp.com/';\n\nexport default baseUrl;\n","import React, { useState, useEffect, useContext } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nexport default function Header({ onLogout }) {\n  const location = useLocation().pathname;\n  const { user } = useContext(CurrentUserContext);\n  const [linkDest, setLinkDest] = useState('/signup');\n  const [linkTitle, setLinkTitle] = useState('Регистрация');\n  const [menuOpened, setMenuOpened] = useState(false);\n  const email = user ? user.email : '';\n\n  const handleLogout = () => {\n    onLogout();\n    setMenuOpened(false);\n  };\n  const renderBurger = () => setMenuOpened(!menuOpened);\n  const renderLink = () => {\n    switch (location) {\n      case '/signin':\n        setLinkTitle('Регистрация');\n        setLinkDest('/signup');\n        break;\n      case '/signup':\n        setLinkTitle('Войти');\n        setLinkDest('/signin');\n        break;\n      case '/':\n        setLinkTitle('Выйти');\n        setLinkDest('/signin');\n        break;\n      default:\n        setLinkTitle('Регистрация');\n        setLinkDest('/signup');\n        break;\n    }\n  };\n\n  useEffect(() => {\n    renderLink();\n  });\n\n  return (\n    <>\n      <div className={`burger ${menuOpened ? 'burger_type_active' : ''}`}>\n        <p className=\"burger__text\">{user ? email : ''}&nbsp;</p>\n        <Link className=\"burger__link\" to={linkDest}\n          onClick={() => location === '/' ? handleLogout() : ''}>\n          {linkTitle}\n        </Link>\n      </div>\n      <header className=\"header\">\n        <div className=\"header__logo\" title=\"Mesto\" />\n        <div className=\"header__actions\">\n          <p className=\"header__text\">{user ? email : ''}&nbsp;</p>\n          <Link\n            to={linkDest}\n            className={`header__link ${user && 'header__link_idle-on-mobile'}`}\n            onClick={() => location === '/' ? handleLogout() : '' }\n          >\n            {linkTitle}\n          </Link>\n          <button\n            className={`${user ? 'header__burger'\n              : 'header__burger_idle'} ${menuOpened ? 'header__burger_type_close' : ''}\n            `}\n            type=\"button\"\n            onClick={renderBurger}\n          />\n        </div>\n      </header>\n    </>\n  );\n}\n","import React, { useContext } from 'react';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\n  const { user } = useContext(CurrentUserContext);\n  const isLiked = card.likes.some((likeHolder) => likeHolder._id === user._id);\n  const cardLikeButtonClassName = `card__like-button ${isLiked && 'card__like-button_active'}`;\n  const isOwn = card.owner !== null\n  ? card.owner._id === user._id\n  : false;\n  const cardDeleteButtonClassName = `card__delete-button ${\n    isOwn ? 'card__delete-button_visible' : 'card__delete-button_hidden'\n  }`;\n\n  return (\n    <li className=\"card\">\n      <img className=\"card__image\" src={card.link} alt={card.name} />\n      <div\n        role=\"presentation\"\n        className=\"card__overlay\"\n        onClick={() => {\n          onCardClick({ src: card.link, title: card.name });\n        }}\n      />\n      <button\n        className={cardDeleteButtonClassName}\n        type=\"button\"\n        onClick={() => {\n          onCardDelete(card);\n        }}\n      />\n      <div className=\"card__items\">\n        <h2 className=\"card__caption\">{card.name}</h2>\n        <div className=\"card__like-block\">\n          <button\n            className={cardLikeButtonClassName}\n            type=\"button\"\n            onClick={() => {\n              onCardLike(card, isLiked);\n            }}\n          />\n          <p className=\"card__like-counter\">{card.likes.length}</p>\n        </div>\n      </div>\n    </li>\n  );\n}\n\nexport default Card;\n","import React, { useContext } from 'react';\nimport Card from './Card';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nfunction Main({\n  cards,\n  onEditProfile,\n  onAddPlace,\n  onEditAvatar,\n  onCardClick,\n  onCardLike,\n  onCardDelete,\n}) {\n  const { user } = useContext(CurrentUserContext);\n\n  return (\n    <>\n      <main>\n        <section className=\"profile\">\n          <div className=\"profile__avatar-overlay\" onClick={onEditAvatar} role=\"presentation\">\n            <img className=\"profile__avatar\" src={user.avatar} alt=\"Аватар\" />\n          </div>\n          <div className=\"profile__info\">\n            <h1 className=\"profile__title\">{user.name}</h1>\n            <p className=\"profile__subtitle\">{user.about}</p>\n            <button className=\"profile__edit-button\" type=\"button\" onClick={onEditProfile} />\n          </div>\n          <button className=\"profile__add-button\" type=\"button\" onClick={onAddPlace} />\n        </section>\n\n        <section>\n          <ul className=\"cards\">\n            {cards.map((item) => (\n              <Card\n                card={item}\n                key={item._id}\n                cardId={item._id}\n                onCardClick={onCardClick}\n                onCardLike={onCardLike}\n                onCardDelete={onCardDelete}\n              />\n            ))}\n          </ul>\n        </section>\n      </main>\n    </>\n  );\n}\n\nexport default Main;\n","import React from 'react';\nimport { useLocation, Link } from 'react-router-dom';\n\nexport default function AuthForm({ children, onSubmit }) {\n  const location = useLocation().pathname;\n  const renderSignInLink = (\n    <div className=\"login__actions\">\n      <p className=\"login__text\">Уже зарегистрированы?&nbsp;</p>\n      <Link className=\"login__link\" to=\"/signin\">\n        Войти\n      </Link>\n    </div>\n  );\n\n  return (\n    <form className=\"login\" onSubmit={onSubmit}>\n      {children}\n      {location === '/signup' && renderSignInLink}\n    </form>\n  );\n}\n","import React, { useState, useRef, useEffect } from 'react';\nimport AuthForm from './AuthForm';\n\nexport default function Login({ onLogin }) {\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [buttonTitle, setButtonTitle] = useState('Войти');\n  const errorShow = (err) => console.error(err);\n  const buttonRef = useRef();\n  const onEmailChange = (e) => setEmail(e.target.value);\n  const onPassChange = (e) => setPassword(e.target.value);\n  const handleLogin = (e) => {\n    e.preventDefault();\n    setButtonTitle('Обработка...');\n    try {\n      onLogin({ password, email })\n    }\n    catch (err) {\n      errorShow(err)\n    }\n    finally {\n      setButtonTitle('Войти');\n    }\n  };\n\n  useEffect(() =>{\n    if(email && password){\n      buttonRef.current.disabled = false;\n    }else {\n      buttonRef.current.disabled = true;\n    }\n  })\n\n  return (\n    <AuthForm className=\"login\" onSubmit={handleLogin}>\n      <h2 className=\"login__title\">Вход</h2>\n      <input\n        className=\"login__input\"\n        onChange={onEmailChange}\n        name=\"email\"\n        type=\"email\"\n        title=\"email\"\n        value={email || ''}\n        placeholder=\"Email\"\n        required\n      />\n      <input\n        className=\"login__input\"\n        onChange={onPassChange}\n        name=\"password\"\n        type=\"password\"\n        title=\"Пароль\"\n        value={password || ''}\n        placeholder=\"Пароль\"\n        required\n      />\n      <button ref={buttonRef} className=\"login__button\" type=\"submit\">\n        {buttonTitle}\n      </button>\n    </AuthForm>\n  );\n}\n","import React, { useState } from 'react';\nimport AuthForm from './AuthForm';\n\nexport default function Register({ onRegistration }) {\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [buttonTitle, setButtonTitle] = useState('Зарегистрироваться');\n  const errorShow = (err) => console.error(err);\n  const onEmailChange = (e) => setEmail(e.target.value);\n  const onPassChange = (e) => setPassword(e.target.value);\n\n  const handleRegistration = (e) => {\n    e.preventDefault();\n    setButtonTitle('Обработка...');\n    try {\n      onRegistration({ password, email })\n    }\n    catch (err) {\n      errorShow(err)\n    }\n    finally {\n      setButtonTitle('Зарегистрироваться');\n    }\n  };\n\n  return (\n    <AuthForm className=\"login\" onSubmit={handleRegistration}>\n      <h2 className=\"login__title\">Регистрация</h2>\n      <input\n        className=\"login__input\"\n        onChange={onEmailChange}\n        name=\"email\"\n        type=\"email\"\n        title=\"email\"\n        value={email || ''}\n        placeholder=\"Email\"\n        required\n      />\n      <input\n        className=\"login__input\"\n        onChange={onPassChange}\n        name=\"password\"\n        type=\"password\"\n        title=\"Пароль\"\n        value={password || ''}\n        placeholder=\"Пароль\"\n        required\n      />\n      <button className=\"login__button\" type=\"submit\">\n        {buttonTitle}\n      </button>\n    </AuthForm>\n  );\n}\n","import React from 'react';\n\nfunction Footer() {\n  const currentDate = new Date();\n  return (\n    <footer className=\"footer\">\n      <h2 className=\"footer__copyright\">&copy; {currentDate.getFullYear()} Mesto Russia</h2>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\n\nfunction PopupWithForm({ title, name, children, isOpen, onClose, btnCaption, onSubmit }) {\n  const handleOverlayClick = (evt) => evt.target === evt.currentTarget && onClose();\n\n  return (\n    <div\n      id={name}\n      className={`popup ${isOpen ? 'popup_opened' : ''}`}\n      role=\"presentation\"\n      onClick={handleOverlayClick}\n    >\n      <form className=\"popup__container popup__container_data\" name={name} onSubmit={onSubmit}>\n        <div className=\"popup__window\">\n          <button\n            className=\"popup__close-button\"\n            type=\"button\"\n            name=\"closePopup\"\n            onClick={onClose}\n          />\n          <h2 className=\"popup__title\">{title}</h2>\n          {children}\n          <button className=\"popup__submit-button\" type=\"submit\" name=\"submitPopup\">\n            {btnCaption}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React, { useState, useContext, useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n  const { user } = useContext(CurrentUserContext);\n  const [buttonTitle, setButtonTitle] = useState('Сохранить');\n  const [name, setName] = useState(null);\n  const [about, setAbout] = useState(null);\n  const errorShow = (err) => console.error(err);\n  const handleNameChange = (e) => setName(e.target.value);\n  const handleDescrChange = (e) => setAbout(e.target.value);\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setButtonTitle('Обработка...');\n    try {\n      onUpdateUser({\n        name,\n        about,\n      })\n    }\n    catch (err) {\n      errorShow(err)\n    }\n    finally {\n      setButtonTitle('Сохранить')\n    }\n  }\n  useEffect(() => {\n    if (user !== null) {\n      setName(user.name);\n      setAbout(user.about);\n    }\n  }, [user, isOpen]);\n\n  return (\n    <PopupWithForm\n      name=\"profileForm\"\n      title=\"Редактировать профиль\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      btnCaption={buttonTitle}\n    >\n      <input\n        id=\"inputProfileName\"\n        className=\"popup__input\"\n        name=\"name\"\n        value={name || ''}\n        onChange={handleNameChange}\n        type=\"text\"\n        title=\"имя автора\"\n        placeholder=\"введите имя автора\"\n        minLength=\"2\"\n        maxLength=\"40\"\n        required\n      />\n      <input\n        id=\"inputProfileWork\"\n        className=\"popup__input\"\n        name=\"work\"\n        value={about || ''}\n        onChange={handleDescrChange}\n        type=\"text\"\n        title=\"вид деятельности\"\n        placeholder=\"введите вид деятельности\"\n        minLength=\"2\"\n        maxLength=\"200\"\n        required\n      />\n    </PopupWithForm>\n  );\n}\n\n\nexport default EditProfilePopup;\n","import React, {useState, useRef} from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\n  const [buttonTitle, setButtonTitle] = useState('Сохранить');\n  const errorShow = (err) => console.error(err);\n  const link = useRef();\n  const resetInput = () => link.current.value = '';\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setButtonTitle('Обработка...');\n    try {\n      onUpdateAvatar({\n        avatar: link.current.value,\n      })\n    }\n    catch (err) {\n      errorShow(err)\n    }\n    finally {\n      setButtonTitle('Сохранить')\n      resetInput()\n    }\n  }\n\n  return (\n    <PopupWithForm\n      name=\"avatarForm\"\n      title=\"Обновить аватар\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      btnCaption={buttonTitle}\n    >\n      <input\n        id=\"inputLink\"\n        className=\"popup__input\"\n        name=\"link\"\n        type=\"url\"\n        title=\"укажите путь\"\n        ref={link}\n        placeholder=\"Ссылка на картинку\"\n        required\n      />\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import React, { useState } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup({ isOpen, onClose, onAddPlace }) {\n  const [name, setName] = useState('');\n  const [link, setLink] = useState('');\n  const [buttonTitle, setButtonTitle] = useState('Создать');\n  const errorShow = (err) => console.error(err);\n  const handleNameChange = (e) => setName(e.target.value);\n  const handleLinkChange = (e) => setLink(e.target.value);\n  const resetInput = () => {\n    setName('');\n    setLink('');\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setButtonTitle('Обработка...');\n    try {\n      onAddPlace({ name, link })\n    }\n    catch (err) {\n      errorShow(err)\n    }\n    finally {\n      setButtonTitle('Сохранить')\n      resetInput()\n    }\n  }\n\n  return (\n    <PopupWithForm\n      name=\"placeForm\"\n      title=\"Новое место\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      btnCaption={buttonTitle}\n    >\n      <input\n        id=\"inputPlaceName\"\n        className=\"popup__input\"\n        name=\"name\"\n        type=\"text\"\n        value={name || ''}\n        onChange={handleNameChange}\n        title=\"назовите место\"\n        placeholder=\"Название\"\n        minLength=\"2\"\n        maxLength=\"30\"\n        required\n      />\n      <input\n        id=\"inputPlaceLink\"\n        className=\"popup__input\"\n        name=\"link\"\n        type=\"url\"\n        value={link || ''}\n        onChange={handleLinkChange}\n        title=\"укажите путь\"\n        placeholder=\"Ссылка на картинку\"\n        required\n      />\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction DeletePlacePopup({ isOpen, onClose, onCardDelete }) {\n  const [buttonTitle, setButtonTitle] = React.useState('Да');\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setButtonTitle('Обработка...');\n    onCardDelete()\n      .then(() => setButtonTitle('Да'))\n      .catch(() => setButtonTitle('Ошибка!'));\n  };\n\n  return (\n    <PopupWithForm\n      name=\"cardDeleteForm\"\n      title=\"Вы уверены?\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      btnCaption={buttonTitle}\n    />\n  );\n}\n\nexport default DeletePlacePopup;\n","import React from 'react';\n\nfunction ImagePopup({ card, isOpen, onClose }) {\n  const handleOverlayClick = (evt) => evt.target === evt.currentTarget && onClose();\n\n  return (\n    <div\n      id=\"imageWindow\"\n      className={`popup ${isOpen ? 'popup_opened' : ''}`}\n      role=\"presentation\"\n      onClick={handleOverlayClick}\n    >\n      <div className=\"popup__container\">\n        <button className=\"popup__close-button\" type=\"button\" onClick={onClose} />\n        <figure className=\"popup__figure\">\n          <img className=\"popup__pic\" src={card.src} alt={card.title} />\n          <figcaption className=\"popup__figcaption\">{card.title}</figcaption>\n        </figure>\n      </div>\n    </div>\n  );\n}\n\nexport default ImagePopup;\n","import React from 'react';\n\nexport default function InfoTooltip({ isOpen, onClose }) {\n  const titles = {\n    pass: 'Вы успешно зарегистрировались!',\n    fail: 'Что-то пошло не так! Попробуйте ещё раз.',\n  };\n  const handleOverlayClick = (evt) => evt.target === evt.currentTarget && onClose();\n\n  return (\n    <div\n      id=\"infoTooltip\"\n      className={`popup ${isOpen.visible ? 'popup_opened' : ''}`}\n      role=\"presentation\"\n      onClick={handleOverlayClick}\n    >\n      <div className=\"popup__container popup__container_data\">\n        <div className=\"popup__window\">\n          <button\n            className=\"popup__close-button\"\n            type=\"button\"\n            name=\"closePopup\"\n            onClick={onClose}\n          />\n          <div className={`popup__toolTip-image ${!isOpen.queryApproved && 'popup__toolTip-image_fail'}`} />\n          <h2 className=\"popup__title popup__toolTip-title\">\n            {isOpen.queryApproved ? titles.pass : titles.fail}\n          </h2>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Routes, Route, useNavigate } from 'react-router-dom';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport ProtectedRoute from './ProtectedRoute';\nimport useAuth from '../utils/useAuth';\nimport useApiUser from '../utils/useApiUser';\nimport useApiCard from '../utils/useApiCard';\nimport Header from './Header';\nimport Main from './Main';\nimport Login from './Login';\nimport Register from './Register';\nimport Footer from './Footer';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport DeletePlacePopup from './DeletePlacePopup';\nimport ImagePopup from './ImagePopup';\nimport InfoTooltip from './InfoTooltip';\n\nfunction App() {\n  const [isEditProfilePopupState, setIsEditProfilePopupState] = useState(false);\n  const [isAddPlacePopupState, setIsAddPlacePopupState] = useState(false);\n  const [isDeletePlacePopupState, setIsDeletePlacePopupState] = useState(false);\n  const [isEditAvatarPopupState, setIsEditAvatarPopupState] = useState(false);\n  const [isImgPopupState, setIsImgPopupState] = useState(false);\n  const [isInfoTooltipState, setIsInfoTooltipState] = useState({visible: false, queryApproved: false});\n  const [selectedCard, setSelectedCard] = useState({});\n  const [cards, setCards] = useState([]);\n  const errorShow = (err) => console.error(err);\n  const { signup, signin, signout } = useAuth();\n  const { checkToken, getUserInfo, setUserInfo, uploadAvatar } = useApiUser();\n  const { getCards, postCard, removeCard, setLike, removeLike } = useApiCard();\n  const navigate = useNavigate();\n  const [user, setUser] = useState(null);\n  const [userChecked, setUserChecked] = useState(null);\n  const start = useRef(null)\n\n  const onLoadCheck = () => {\n    checkToken().then((res) => start.current = res)\n  }\n\n  const closeAllPopups = () => {\n    setIsEditProfilePopupState(false);\n    setIsAddPlacePopupState(false);\n    setIsEditAvatarPopupState(false);\n    setIsImgPopupState(false);\n    setIsDeletePlacePopupState(false);\n    setIsInfoTooltipState(false);\n  };\n\n  useEffect(() => {\n    if (start === null) {\n      onLoadCheck();\n    }\n\n    if (start !== null) {\n      getUserInfo()\n        .then(res => {\n          if (res) {\n            setUser(res);\n          }\n        })\n        .then(() => {\n          getCards()\n            .then(initCards => {\n              setCards(initCards)\n            })\n        })\n        .then(() => {\n          setUserChecked(true);\n        })\n        .finally(() => {\n          navigate('/')\n        });\n    }\n\n\n    if (!userChecked) {\n      return (\n        <div>Check user login...</div>\n      )\n    }\n\n    const escHandler = (evt) => evt.key === 'Escape' && closeAllPopups();\n    document.addEventListener('keydown', escHandler);\n\n    return () => {\n      document.removeEventListener('keydown', escHandler);\n    };\n  }, []);\n\n\n  const openEditProfilePopup = () => {\n    setIsEditProfilePopupState(true);\n  };\n\n  const openAddPlacePopup = () => {\n    setIsAddPlacePopupState(true);\n  };\n\n  const openEditAvatarPopup = () => {\n    setIsEditAvatarPopupState(true);\n  };\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n    setIsImgPopupState(true);\n  };\n\n  const handleLikeClick = (card, isLiked) => {\n    const update = (newCard) => {\n      setCards(cards.map((mappedCard) => (mappedCard._id === card._id ? newCard : mappedCard)));\n    };\n    return isLiked\n      ? removeLike(card).then(update).catch(errorShow)\n      : setLike(card).then(update).catch(errorShow);\n  };\n\n  const handleUpdateUser = async (newInfo) => {\n    await setUserInfo(newInfo)\n      .then(() => {\n        getUserInfo()\n          .then(data => {\n            setUser(data);\n          })\n      })\n      .then(() => {\n        closeAllPopups();\n      })\n      .catch(errorShow);\n  };\n\n  const handleUpdateAvatar = async ({ avatar }) => {\n    await uploadAvatar(avatar)\n    .then(() => {\n      getUserInfo()\n        .then(data => {\n          setUser(data);\n        })\n    })\n    .then(() => {\n      closeAllPopups();\n    })\n    .catch(errorShow);\n};\n\n  const handleAddPlaceSubmit = async (card) => {\n    await postCard(card)\n      .then((data) => {\n        setCards([data, ...cards]);\n        closeAllPopups();\n      })\n      .catch(errorShow);\n  };\n\n  const handleDeleteClick = (card) => {\n    setSelectedCard(card);\n    setIsDeletePlacePopupState(true);\n  };\n\n  const handleDeletePlaceSubmit = async () => {\n    await removeCard(selectedCard)\n      .then(() => {\n        setCards((data) => data.filter((card) => card._id !== selectedCard._id));\n        closeAllPopups();\n      })\n      .catch(errorShow);\n  };\n\n  const handleLogin = ({ password, email }) => {\n    signin({ password, email })\n      .then(res => {\n        if (res.login === 'ok') {\n          getUserInfo()\n            .then(data => {\n              setUser(data);\n            })\n            .then(() => {\n              getCards()\n                .then(initCards => {\n                  setCards(initCards)\n                })\n            })\n            .finally(() => {\n              navigate('/')\n            })\n        }\n      })\n      .catch((error) => {\n        errorShow(error);\n        setIsInfoTooltipState({visible: true, queryApproved: false});\n      })\n  }\n\n\n  const handleRegistration = async ({ password, email }) => {\n    signup({ password, email })\n      .then(() => {\n        navigate('/signin');\n        setIsInfoTooltipState({visible: true, queryApproved: true});\n      })\n      .catch((error) => {\n        errorShow(error)\n        setIsInfoTooltipState({visible: true, queryApproved: false});\n      });\n  };\n\n  const handleLogout = () => {\n    signout()\n      .then(() => {\n        setUser(null);\n      })\n      .catch((error) => {\n        errorShow(error);\n      });\n  }\n\n  return (\n    <div className=\"body\">\n      <div className=\"page\">\n        <CurrentUserContext.Provider value={{ user }}>\n          <Header onLogout={handleLogout} />\n          <Routes>\n            <Route path=\"/signin\" element={<Login onLogin={handleLogin} />} />\n            <Route path=\"/signup\" element={<Register onRegistration={handleRegistration} />} />\n            <Route\n              path=\"/*\"\n              element={\n                <ProtectedRoute>\n                  <Main\n                    onEditProfile={openEditProfilePopup}\n                    onAddPlace={openAddPlacePopup}\n                    onEditAvatar={openEditAvatarPopup}\n                    onCardClick={handleCardClick}\n                    onCardLike={handleLikeClick}\n                    onCardDelete={handleDeleteClick}\n                    cards={cards}\n                  />\n                </ProtectedRoute>\n              }\n            />\n          </Routes>\n          <Footer />\n          <EditProfilePopup\n            isOpen={isEditProfilePopupState}\n            onUpdateUser={handleUpdateUser}\n            onClose={closeAllPopups}\n          />\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupState}\n            onUpdateAvatar={handleUpdateAvatar}\n            onClose={closeAllPopups}\n          />\n          <AddPlacePopup\n            isOpen={isAddPlacePopupState}\n            onAddPlace={handleAddPlaceSubmit}\n            onClose={closeAllPopups}\n          />\n          <DeletePlacePopup\n            isOpen={isDeletePlacePopupState}\n            onCardDelete={handleDeletePlaceSubmit}\n            onClose={closeAllPopups}\n          />\n          <ImagePopup card={selectedCard} isOpen={isImgPopupState} onClose={closeAllPopups} />\n          <InfoTooltip isOpen={isInfoTooltipState} onClose={closeAllPopups} />\n        </CurrentUserContext.Provider>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import baseUrl from './const';\n\nexport default function useAuth() {\n\n  const handleResponse = (res) => {\n    const answer = res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\n    return answer;\n  };\n\n  return {\n    signup({ password, email }) {\n      return fetch(`${baseUrl}signup`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          password,\n          email,\n        }),\n      }).then(handleResponse);\n    },\n\n    signin({ password, email }) {\n      return fetch(`${baseUrl}signin`, {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          password,\n          email,\n        }),\n      }).then(handleResponse);\n    },\n\n    signout() {\n      return fetch(`${baseUrl}signout`, {\n        method: 'GET',\n        credentials: 'include',\n      }).then(handleResponse);\n    }\n  }\n}\n\n","import baseUrl from './const';\n\nexport default function useApiUser() {\n\n  const handleResponse = (res) => {\n    const answer = res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\n    return answer;\n  };\n\n  return {\n    getUserInfo() {\n      return fetch(`${baseUrl}users/me`, {\n        method: 'GET',\n        credentials: 'include',\n      }).then(handleResponse);\n    },\n\n    checkToken() {\n      return fetch(`${baseUrl}check`, {\n        method: 'GET',\n        credentials: 'include',\n      }).then(res => res.ok);\n    },\n\n    setUserInfo(data) {\n      return fetch(`${baseUrl}users/me`, {\n        method: 'PATCH',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          name: data.name,\n          about: data.about,\n        }),\n      }).then(handleResponse);\n    },\n\n    uploadAvatar(link) {\n      return fetch(`${baseUrl}users/me/avatar`, {\n        method: 'PATCH',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          avatar: link,\n        }),\n      }).then(handleResponse);\n    },\n  }\n}\n","import baseUrl from './const';\n\nexport default function useApiCard() {\n  const handleResponse = (res) => {\n    const answer = res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\n    return answer;\n  };\n\n  return {\n    getCards() {\n      return fetch(`${baseUrl}cards`, {\n        method: 'GET',\n        credentials: 'include',\n      }).then(handleResponse);\n    },\n\n    postCard(card) {\n      return fetch(`${baseUrl}cards`, {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          name: card.name,\n          link: card.link,\n        }),\n      }).then(handleResponse);\n    },\n\n    removeCard(card) {\n      return fetch(`${baseUrl}cards/${card._id}`, {\n        method: 'DELETE',\n        credentials: 'include',\n      }).then(handleResponse);\n    },\n\n    setLike(card) {\n      return fetch(`${baseUrl}cards/${card._id}/likes`, {\n        method: 'PUT',\n        credentials: 'include',\n      }).then(handleResponse);\n    },\n\n    removeLike(card) {\n      return fetch(`${baseUrl}cards/${card._id}/likes`, {\n        method: 'DELETE',\n        credentials: 'include',\n      }).then(handleResponse);\n    }\n\n  }\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n        <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\nreportWebVitals();\n"],"sourceRoot":""}