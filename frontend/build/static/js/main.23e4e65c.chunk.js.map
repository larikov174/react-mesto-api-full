{"version":3,"sources":["contexts/CurrentUserContext.js","components/ProtectedRoute.js","utils/const.js","components/Header.js","components/Card.js","components/Main.js","components/AuthForm.js","components/Login.js","components/Register.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeletePlacePopup.js","components/ImagePopup.js","components/InfoTooltip.js","components/App.js","utils/useAuth.js","utils/useApiUser.js","utils/useApiCard.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","ProtectedRoute","children","useContext","user","to","replace","baseUrl","Header","onLogout","location","useLocation","pathname","useState","linkDest","setLinkDest","linkTitle","setLinkTitle","menuOpened","setMenuOpened","email","handleLogout","useEffect","renderLink","className","onClick","title","type","Card","card","onCardClick","onCardLike","onCardDelete","isLiked","likes","some","likeHolder","_id","cardLikeButtonClassName","isOwn","owner","cardDeleteButtonClassName","src","link","alt","name","role","length","Main","cards","onEditProfile","onAddPlace","onEditAvatar","avatar","about","map","item","cardId","AuthForm","onSubmit","renderSignInLink","Login","onLogin","setEmail","password","setPassword","buttonTitle","setButtonTitle","buttonRef","useRef","current","disabled","e","preventDefault","err","console","error","errorShow","onChange","target","value","placeholder","required","ref","Register","onRegistration","Footer","currentDate","Date","getFullYear","PopupWithForm","isOpen","onClose","btnCaption","id","evt","currentTarget","EditProfilePopup","onUpdateUser","setName","setAbout","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","setLink","DeletePlacePopup","then","catch","ImagePopup","InfoTooltip","titles","visible","queryApproved","App","isEditProfilePopupState","setIsEditProfilePopupState","isAddPlacePopupState","setIsAddPlacePopupState","isDeletePlacePopupState","setIsDeletePlacePopupState","isEditAvatarPopupState","setIsEditAvatarPopupState","isImgPopupState","setIsImgPopupState","isInfoTooltipState","setIsInfoTooltipState","selectedCard","setSelectedCard","setCards","handleResponse","res","ok","json","Promise","reject","status","signup","fetch","method","headers","body","JSON","stringify","signin","credentials","signout","useAuth","getUserInfo","checkToken","setUserInfo","data","uploadAvatar","useApiUser","getCards","postCard","removeCard","setLike","removeLike","useApiCard","navigate","useNavigate","setUser","userChecked","setUserChecked","start","closeAllPopups","initCards","finally","escHandler","key","document","addEventListener","removeEventListener","handleUpdateUser","newInfo","a","handleUpdateAvatar","handleAddPlaceSubmit","handleDeletePlaceSubmit","filter","handleRegistration","Provider","path","element","login","update","newCard","mappedCard","AddPlacePopup","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.23e4e65c.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst CurrentUserContext = React.createContext();\r\n\r\nexport default CurrentUserContext;\r\n","import React, { useContext } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nexport default function ProtectedRoute({ children }) {\r\n  const { user } = useContext(CurrentUserContext);\r\n  return user ? children : <Navigate to=\"./signin\" replace />\r\n}\r\n","// const baseUrl = 'http://localhost:3001/';\r\nconst baseUrl = 'https://api.larikov.nomoredomains.rocks/';\r\n\r\nexport default baseUrl;\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nexport default function Header({ onLogout }) {\r\n  const location = useLocation().pathname;\r\n  const { user } = useContext(CurrentUserContext);\r\n  const [linkDest, setLinkDest] = useState('/signup');\r\n  const [linkTitle, setLinkTitle] = useState('Регистрация');\r\n  const [menuOpened, setMenuOpened] = useState(false);\r\n  const email = user ? user.email : '';\r\n\r\n  const handleLogout = () => {\r\n    onLogout();\r\n    setMenuOpened(false);\r\n  };\r\n  const renderBurger = () => setMenuOpened(!menuOpened);\r\n  const renderLink = () => {\r\n    switch (location) {\r\n      case '/signin':\r\n        setLinkTitle('Регистрация');\r\n        setLinkDest('/signup');\r\n        break;\r\n      case '/signup':\r\n        setLinkTitle('Войти');\r\n        setLinkDest('/signin');\r\n        break;\r\n      case '/':\r\n        setLinkTitle('Выйти');\r\n        setLinkDest('/signin');\r\n        break;\r\n      default:\r\n        setLinkTitle('Регистрация');\r\n        setLinkDest('/signup');\r\n        break;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    renderLink();\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <div className={`burger ${menuOpened ? 'burger_type_active' : ''}`}>\r\n        <p className=\"burger__text\">{user ? email : ''}&nbsp;</p>\r\n        <Link className=\"burger__link\" to={linkDest}\r\n          onClick={() => location === '/' ? handleLogout() : ''}>\r\n          {linkTitle}\r\n        </Link>\r\n      </div>\r\n      <header className=\"header\">\r\n        <div className=\"header__logo\" title=\"Mesto\" />\r\n        <div className=\"header__actions\">\r\n          <p className=\"header__text\">{user ? email : ''}&nbsp;</p>\r\n          <Link\r\n            to={linkDest}\r\n            className={`header__link ${user && 'header__link_idle-on-mobile'}`}\r\n            onClick={() => location === '/' ? handleLogout() : '' }\r\n          >\r\n            {linkTitle}\r\n          </Link>\r\n          <button\r\n            className={`${user ? 'header__burger'\r\n              : 'header__burger_idle'} ${menuOpened ? 'header__burger_type_close' : ''}\r\n            `}\r\n            type=\"button\"\r\n            onClick={renderBurger}\r\n          />\r\n        </div>\r\n      </header>\r\n    </>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const { user } = useContext(CurrentUserContext);\r\n  const isLiked = card.likes.some((likeHolder) => likeHolder._id === user._id);\r\n  const cardLikeButtonClassName = `card__like-button ${isLiked && 'card__like-button_active'}`;\r\n  const isOwn = card.owner !== null\r\n  ? card.owner._id === user._id\r\n  : false;\r\n  const cardDeleteButtonClassName = `card__delete-button ${\r\n    isOwn ? 'card__delete-button_visible' : 'card__delete-button_hidden'\r\n  }`;\r\n\r\n  return (\r\n    <li className=\"card\">\r\n      <img className=\"card__image\" src={card.link} alt={card.name} />\r\n      <div\r\n        role=\"presentation\"\r\n        className=\"card__overlay\"\r\n        onClick={() => {\r\n          onCardClick({ src: card.link, title: card.name });\r\n        }}\r\n      />\r\n      <button\r\n        className={cardDeleteButtonClassName}\r\n        type=\"button\"\r\n        onClick={() => {\r\n          onCardDelete(card);\r\n        }}\r\n      />\r\n      <div className=\"card__items\">\r\n        <h2 className=\"card__caption\">{card.name}</h2>\r\n        <div className=\"card__like-block\">\r\n          <button\r\n            className={cardLikeButtonClassName}\r\n            type=\"button\"\r\n            onClick={() => {\r\n              onCardLike(card, isLiked);\r\n            }}\r\n          />\r\n          <p className=\"card__like-counter\">{card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React, { useContext } from 'react';\r\nimport Card from './Card';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({\r\n  cards,\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onEditAvatar,\r\n  onCardClick,\r\n  onCardLike,\r\n  onCardDelete,\r\n}) {\r\n  const { user } = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <>\r\n      <main>\r\n        <section className=\"profile\">\r\n          <div className=\"profile__avatar-overlay\" onClick={onEditAvatar} role=\"presentation\">\r\n            <img className=\"profile__avatar\" src={user.avatar} alt=\"Аватар\" />\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <h1 className=\"profile__title\">{user.name}</h1>\r\n            <p className=\"profile__subtitle\">{user.about}</p>\r\n            <button className=\"profile__edit-button\" type=\"button\" onClick={onEditProfile} />\r\n          </div>\r\n          <button className=\"profile__add-button\" type=\"button\" onClick={onAddPlace} />\r\n        </section>\r\n\r\n        <section>\r\n          <ul className=\"cards\">\r\n            {cards.map((item) => (\r\n              <Card\r\n                card={item}\r\n                key={item._id}\r\n                cardId={item._id}\r\n                onCardClick={onCardClick}\r\n                onCardLike={onCardLike}\r\n                onCardDelete={onCardDelete}\r\n              />\r\n            ))}\r\n          </ul>\r\n        </section>\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\nimport { useLocation, Link } from 'react-router-dom';\r\n\r\nexport default function AuthForm({ children, onSubmit }) {\r\n  const location = useLocation().pathname;\r\n  const renderSignInLink = (\r\n    <div className=\"login__actions\">\r\n      <p className=\"login__text\">Уже зарегистрированы?&nbsp;</p>\r\n      <Link className=\"login__link\" to=\"/signin\">\r\n        Войти\r\n      </Link>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <form className=\"login\" onSubmit={onSubmit}>\r\n      {children}\r\n      {location === '/signup' && renderSignInLink}\r\n    </form>\r\n  );\r\n}\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport AuthForm from './AuthForm';\r\n\r\nexport default function Login({ onLogin }) {\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [buttonTitle, setButtonTitle] = useState('Войти');\r\n  const errorShow = (err) => console.error(err);\r\n  const buttonRef = useRef();\r\n  const onEmailChange = (e) => setEmail(e.target.value);\r\n  const onPassChange = (e) => setPassword(e.target.value);\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n    setButtonTitle('Обработка...');\r\n    try {\r\n      onLogin({ password, email })\r\n    }\r\n    catch (err) {\r\n      errorShow(err)\r\n    }\r\n    finally {\r\n      setButtonTitle('Войти');\r\n    }\r\n  };\r\n\r\n  useEffect(() =>{\r\n    if(email && password){\r\n      buttonRef.current.disabled = false;\r\n    }else {\r\n      buttonRef.current.disabled = true;\r\n    }\r\n  })\r\n\r\n  return (\r\n    <AuthForm className=\"login\" onSubmit={handleLogin}>\r\n      <h2 className=\"login__title\">Вход</h2>\r\n      <input\r\n        className=\"login__input\"\r\n        onChange={onEmailChange}\r\n        name=\"email\"\r\n        type=\"email\"\r\n        title=\"email\"\r\n        value={email || ''}\r\n        placeholder=\"Email\"\r\n        required\r\n      />\r\n      <input\r\n        className=\"login__input\"\r\n        onChange={onPassChange}\r\n        name=\"password\"\r\n        type=\"password\"\r\n        title=\"Пароль\"\r\n        value={password || ''}\r\n        placeholder=\"Пароль\"\r\n        required\r\n      />\r\n      <button ref={buttonRef} className=\"login__button\" type=\"submit\">\r\n        {buttonTitle}\r\n      </button>\r\n    </AuthForm>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport AuthForm from './AuthForm';\r\n\r\nexport default function Register({ onRegistration }) {\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [buttonTitle, setButtonTitle] = useState('Зарегистрироваться');\r\n  const errorShow = (err) => console.error(err);\r\n  const onEmailChange = (e) => setEmail(e.target.value);\r\n  const onPassChange = (e) => setPassword(e.target.value);\r\n\r\n  const handleRegistration = (e) => {\r\n    e.preventDefault();\r\n    setButtonTitle('Обработка...');\r\n    try {\r\n      onRegistration({ password, email })\r\n    }\r\n    catch (err) {\r\n      errorShow(err)\r\n    }\r\n    finally {\r\n      setButtonTitle('Зарегистрироваться');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthForm className=\"login\" onSubmit={handleRegistration}>\r\n      <h2 className=\"login__title\">Регистрация</h2>\r\n      <input\r\n        className=\"login__input\"\r\n        onChange={onEmailChange}\r\n        name=\"email\"\r\n        type=\"email\"\r\n        title=\"email\"\r\n        value={email || ''}\r\n        placeholder=\"Email\"\r\n        required\r\n      />\r\n      <input\r\n        className=\"login__input\"\r\n        onChange={onPassChange}\r\n        name=\"password\"\r\n        type=\"password\"\r\n        title=\"Пароль\"\r\n        value={password || ''}\r\n        placeholder=\"Пароль\"\r\n        required\r\n      />\r\n      <button className=\"login__button\" type=\"submit\">\r\n        {buttonTitle}\r\n      </button>\r\n    </AuthForm>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  const currentDate = new Date();\r\n  return (\r\n    <footer className=\"footer\">\r\n      <h2 className=\"footer__copyright\">&copy; {currentDate.getFullYear()} Mesto Russia</h2>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\n\r\nfunction PopupWithForm({ title, name, children, isOpen, onClose, btnCaption, onSubmit }) {\r\n  const handleOverlayClick = (evt) => evt.target === evt.currentTarget && onClose();\r\n\r\n  return (\r\n    <div\r\n      id={name}\r\n      className={`popup ${isOpen ? 'popup_opened' : ''}`}\r\n      role=\"presentation\"\r\n      onClick={handleOverlayClick}\r\n    >\r\n      <form className=\"popup__container popup__container_data\" name={name} onSubmit={onSubmit}>\r\n        <div className=\"popup__window\">\r\n          <button\r\n            className=\"popup__close-button\"\r\n            type=\"button\"\r\n            name=\"closePopup\"\r\n            onClick={onClose}\r\n          />\r\n          <h2 className=\"popup__title\">{title}</h2>\r\n          {children}\r\n          <button className=\"popup__submit-button\" type=\"submit\" name=\"submitPopup\">\r\n            {btnCaption}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n  const { user } = useContext(CurrentUserContext);\r\n  const [buttonTitle, setButtonTitle] = useState('Сохранить');\r\n  const [name, setName] = useState(null);\r\n  const [about, setAbout] = useState(null);\r\n  const errorShow = (err) => console.error(err);\r\n  const handleNameChange = (e) => setName(e.target.value);\r\n  const handleDescrChange = (e) => setAbout(e.target.value);\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setButtonTitle('Обработка...');\r\n    try {\r\n      onUpdateUser({\r\n        name,\r\n        about,\r\n      })\r\n    }\r\n    catch (err) {\r\n      errorShow(err)\r\n    }\r\n    finally {\r\n      setButtonTitle('Сохранить')\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    if (user !== null) {\r\n      setName(user.name);\r\n      setAbout(user.about);\r\n    }\r\n  }, [user, isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profileForm\"\r\n      title=\"Редактировать профиль\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      btnCaption={buttonTitle}\r\n    >\r\n      <input\r\n        id=\"inputProfileName\"\r\n        className=\"popup__input\"\r\n        name=\"name\"\r\n        value={name || ''}\r\n        onChange={handleNameChange}\r\n        type=\"text\"\r\n        title=\"имя автора\"\r\n        placeholder=\"введите имя автора\"\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        required\r\n      />\r\n      <input\r\n        id=\"inputProfileWork\"\r\n        className=\"popup__input\"\r\n        name=\"work\"\r\n        value={about || ''}\r\n        onChange={handleDescrChange}\r\n        type=\"text\"\r\n        title=\"вид деятельности\"\r\n        placeholder=\"введите вид деятельности\"\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        required\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\n\r\nexport default EditProfilePopup;\r\n","import React, {useState, useRef} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n  const [buttonTitle, setButtonTitle] = useState('Сохранить');\r\n  const errorShow = (err) => console.error(err);\r\n  const link = useRef();\r\n  const resetInput = () => link.current.value = '';\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setButtonTitle('Обработка...');\r\n    try {\r\n      onUpdateAvatar({\r\n        avatar: link.current.value,\r\n      })\r\n    }\r\n    catch (err) {\r\n      errorShow(err)\r\n    }\r\n    finally {\r\n      setButtonTitle('Сохранить')\r\n      resetInput()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"avatarForm\"\r\n      title=\"Обновить аватар\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      btnCaption={buttonTitle}\r\n    >\r\n      <input\r\n        id=\"inputLink\"\r\n        className=\"popup__input\"\r\n        name=\"link\"\r\n        type=\"url\"\r\n        title=\"укажите путь\"\r\n        ref={link}\r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React, { useState } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onAddPlace }) {\r\n  const [name, setName] = useState('');\r\n  const [link, setLink] = useState('');\r\n  const [buttonTitle, setButtonTitle] = useState('Создать');\r\n  const errorShow = (err) => console.error(err);\r\n  const handleNameChange = (e) => setName(e.target.value);\r\n  const handleLinkChange = (e) => setLink(e.target.value);\r\n  const resetInput = () => {\r\n    setName('');\r\n    setLink('');\r\n  };\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setButtonTitle('Обработка...');\r\n    try {\r\n      onAddPlace({ name, link })\r\n    }\r\n    catch (err) {\r\n      errorShow(err)\r\n    }\r\n    finally {\r\n      setButtonTitle('Сохранить')\r\n      resetInput()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"placeForm\"\r\n      title=\"Новое место\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      btnCaption={buttonTitle}\r\n    >\r\n      <input\r\n        id=\"inputPlaceName\"\r\n        className=\"popup__input\"\r\n        name=\"name\"\r\n        type=\"text\"\r\n        value={name || ''}\r\n        onChange={handleNameChange}\r\n        title=\"назовите место\"\r\n        placeholder=\"Название\"\r\n        minLength=\"2\"\r\n        maxLength=\"30\"\r\n        required\r\n      />\r\n      <input\r\n        id=\"inputPlaceLink\"\r\n        className=\"popup__input\"\r\n        name=\"link\"\r\n        type=\"url\"\r\n        value={link || ''}\r\n        onChange={handleLinkChange}\r\n        title=\"укажите путь\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction DeletePlacePopup({ isOpen, onClose, onCardDelete }) {\r\n  const [buttonTitle, setButtonTitle] = React.useState('Да');\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setButtonTitle('Обработка...');\r\n    onCardDelete()\r\n      .then(() => setButtonTitle('Да'))\r\n      .catch(() => setButtonTitle('Ошибка!'));\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"cardDeleteForm\"\r\n      title=\"Вы уверены?\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      btnCaption={buttonTitle}\r\n    />\r\n  );\r\n}\r\n\r\nexport default DeletePlacePopup;\r\n","import React from 'react';\r\n\r\nfunction ImagePopup({ card, isOpen, onClose }) {\r\n  const handleOverlayClick = (evt) => evt.target === evt.currentTarget && onClose();\r\n\r\n  return (\r\n    <div\r\n      id=\"imageWindow\"\r\n      className={`popup ${isOpen ? 'popup_opened' : ''}`}\r\n      role=\"presentation\"\r\n      onClick={handleOverlayClick}\r\n    >\r\n      <div className=\"popup__container\">\r\n        <button className=\"popup__close-button\" type=\"button\" onClick={onClose} />\r\n        <figure className=\"popup__figure\">\r\n          <img className=\"popup__pic\" src={card.src} alt={card.title} />\r\n          <figcaption className=\"popup__figcaption\">{card.title}</figcaption>\r\n        </figure>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","import React from 'react';\r\n\r\nexport default function InfoTooltip({ isOpen, onClose }) {\r\n  const titles = {\r\n    pass: 'Вы успешно зарегистрировались!',\r\n    fail: 'Что-то пошло не так! Попробуйте ещё раз.',\r\n  };\r\n  const handleOverlayClick = (evt) => evt.target === evt.currentTarget && onClose();\r\n\r\n  return (\r\n    <div\r\n      id=\"infoTooltip\"\r\n      className={`popup ${isOpen.visible ? 'popup_opened' : ''}`}\r\n      role=\"presentation\"\r\n      onClick={handleOverlayClick}\r\n    >\r\n      <div className=\"popup__container popup__container_data\">\r\n        <div className=\"popup__window\">\r\n          <button\r\n            className=\"popup__close-button\"\r\n            type=\"button\"\r\n            name=\"closePopup\"\r\n            onClick={onClose}\r\n          />\r\n          <div className={`popup__toolTip-image ${!isOpen.queryApproved && 'popup__toolTip-image_fail'}`} />\r\n          <h2 className=\"popup__title popup__toolTip-title\">\r\n            {isOpen.queryApproved ? titles.pass : titles.fail}\r\n          </h2>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Routes, Route, useNavigate } from 'react-router-dom';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport useAuth from '../utils/useAuth';\r\nimport useApiUser from '../utils/useApiUser';\r\nimport useApiCard from '../utils/useApiCard';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport Footer from './Footer';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport DeletePlacePopup from './DeletePlacePopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport InfoTooltip from './InfoTooltip';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupState, setIsEditProfilePopupState] = useState(false);\r\n  const [isAddPlacePopupState, setIsAddPlacePopupState] = useState(false);\r\n  const [isDeletePlacePopupState, setIsDeletePlacePopupState] = useState(false);\r\n  const [isEditAvatarPopupState, setIsEditAvatarPopupState] = useState(false);\r\n  const [isImgPopupState, setIsImgPopupState] = useState(false);\r\n  const [isInfoTooltipState, setIsInfoTooltipState] = useState({visible: false, queryApproved: false});\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const errorShow = (err) => console.error(err);\r\n  const { signup, signin, signout } = useAuth();\r\n  const { checkToken, getUserInfo, setUserInfo, uploadAvatar } = useApiUser();\r\n  const { getCards, postCard, removeCard, setLike, removeLike } = useApiCard();\r\n  const navigate = useNavigate();\r\n  const [user, setUser] = useState(null);\r\n  const [userChecked, setUserChecked] = useState(null);\r\n  const start = useRef(null)\r\n\r\n  const onLoadCheck = () => {\r\n    checkToken().then((res) => start.current = res)\r\n  }\r\n\r\n  const closeAllPopups = () => {\r\n    setIsEditProfilePopupState(false);\r\n    setIsAddPlacePopupState(false);\r\n    setIsEditAvatarPopupState(false);\r\n    setIsImgPopupState(false);\r\n    setIsDeletePlacePopupState(false);\r\n    setIsInfoTooltipState(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (start === null) {\r\n      onLoadCheck();\r\n    }\r\n\r\n    if (start !== null) {\r\n      getUserInfo()\r\n        .then(res => {\r\n          if (res) {\r\n            setUser(res);\r\n          }\r\n        })\r\n        .then(() => {\r\n          getCards()\r\n            .then(initCards => {\r\n              setCards(initCards)\r\n            })\r\n        })\r\n        .then(() => {\r\n          setUserChecked(true);\r\n        })\r\n        .finally(() => {\r\n          navigate('/')\r\n        });\r\n    }\r\n\r\n\r\n    if (!userChecked) {\r\n      return (\r\n        <div>Check user login...</div>\r\n      )\r\n    }\r\n\r\n    const escHandler = (evt) => evt.key === 'Escape' && closeAllPopups();\r\n    document.addEventListener('keydown', escHandler);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', escHandler);\r\n    };\r\n  }, []);\r\n\r\n\r\n  const openEditProfilePopup = () => {\r\n    setIsEditProfilePopupState(true);\r\n  };\r\n\r\n  const openAddPlacePopup = () => {\r\n    setIsAddPlacePopupState(true);\r\n  };\r\n\r\n  const openEditAvatarPopup = () => {\r\n    setIsEditAvatarPopupState(true);\r\n  };\r\n\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard(card);\r\n    setIsImgPopupState(true);\r\n  };\r\n\r\n  const handleLikeClick = (card, isLiked) => {\r\n    const update = (newCard) => {\r\n      setCards(cards.map((mappedCard) => (mappedCard._id === card._id ? newCard : mappedCard)));\r\n    };\r\n    return isLiked\r\n      ? removeLike(card).then(update).catch(errorShow)\r\n      : setLike(card).then(update).catch(errorShow);\r\n  };\r\n\r\n  const handleUpdateUser = async (newInfo) => {\r\n    await setUserInfo(newInfo)\r\n      .then(() => {\r\n        getUserInfo()\r\n          .then(data => {\r\n            setUser(data);\r\n          })\r\n      })\r\n      .then(() => {\r\n        closeAllPopups();\r\n      })\r\n      .catch(errorShow);\r\n  };\r\n\r\n  const handleUpdateAvatar = async ({ avatar }) => {\r\n    await uploadAvatar(avatar)\r\n    .then(() => {\r\n      getUserInfo()\r\n        .then(data => {\r\n          setUser(data);\r\n        })\r\n    })\r\n    .then(() => {\r\n      closeAllPopups();\r\n    })\r\n    .catch(errorShow);\r\n};\r\n\r\n  const handleAddPlaceSubmit = async (card) => {\r\n    await postCard(card)\r\n      .then((data) => {\r\n        setCards([data, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch(errorShow);\r\n  };\r\n\r\n  const handleDeleteClick = (card) => {\r\n    setSelectedCard(card);\r\n    setIsDeletePlacePopupState(true);\r\n  };\r\n\r\n  const handleDeletePlaceSubmit = async () => {\r\n    await removeCard(selectedCard)\r\n      .then(() => {\r\n        setCards((data) => data.filter((card) => card._id !== selectedCard._id));\r\n        closeAllPopups();\r\n      })\r\n      .catch(errorShow);\r\n  };\r\n\r\n  const handleLogin = ({ password, email }) => {\r\n    signin({ password, email })\r\n      .then(res => {\r\n        if (res.login === 'ok') {\r\n          getUserInfo()\r\n            .then(data => {\r\n              setUser(data);\r\n            })\r\n            .then(() => {\r\n              getCards()\r\n                .then(initCards => {\r\n                  setCards(initCards)\r\n                })\r\n            })\r\n            .finally(() => {\r\n              navigate('/')\r\n            })\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        errorShow(error);\r\n        setIsInfoTooltipState({visible: true, queryApproved: false});\r\n      })\r\n  }\r\n\r\n\r\n  const handleRegistration = async ({ password, email }) => {\r\n    signup({ password, email })\r\n      .then(() => {\r\n        navigate('/signin');\r\n        setIsInfoTooltipState({visible: true, queryApproved: true});\r\n      })\r\n      .catch((error) => {\r\n        errorShow(error)\r\n        setIsInfoTooltipState({visible: true, queryApproved: false});\r\n      });\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    signout()\r\n      .then(() => {\r\n        setUser(null);\r\n      })\r\n      .catch((error) => {\r\n        errorShow(error);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div className=\"body\">\r\n      <div className=\"page\">\r\n        <CurrentUserContext.Provider value={{ user }}>\r\n          <Header onLogout={handleLogout} />\r\n          <Routes>\r\n            <Route path=\"/signin\" element={<Login onLogin={handleLogin} />} />\r\n            <Route path=\"/signup\" element={<Register onRegistration={handleRegistration} />} />\r\n            <Route\r\n              path=\"/*\"\r\n              element={\r\n                <ProtectedRoute>\r\n                  <Main\r\n                    onEditProfile={openEditProfilePopup}\r\n                    onAddPlace={openAddPlacePopup}\r\n                    onEditAvatar={openEditAvatarPopup}\r\n                    onCardClick={handleCardClick}\r\n                    onCardLike={handleLikeClick}\r\n                    onCardDelete={handleDeleteClick}\r\n                    cards={cards}\r\n                  />\r\n                </ProtectedRoute>\r\n              }\r\n            />\r\n          </Routes>\r\n          <Footer />\r\n          <EditProfilePopup\r\n            isOpen={isEditProfilePopupState}\r\n            onUpdateUser={handleUpdateUser}\r\n            onClose={closeAllPopups}\r\n          />\r\n          <EditAvatarPopup\r\n            isOpen={isEditAvatarPopupState}\r\n            onUpdateAvatar={handleUpdateAvatar}\r\n            onClose={closeAllPopups}\r\n          />\r\n          <AddPlacePopup\r\n            isOpen={isAddPlacePopupState}\r\n            onAddPlace={handleAddPlaceSubmit}\r\n            onClose={closeAllPopups}\r\n          />\r\n          <DeletePlacePopup\r\n            isOpen={isDeletePlacePopupState}\r\n            onCardDelete={handleDeletePlaceSubmit}\r\n            onClose={closeAllPopups}\r\n          />\r\n          <ImagePopup card={selectedCard} isOpen={isImgPopupState} onClose={closeAllPopups} />\r\n          <InfoTooltip isOpen={isInfoTooltipState} onClose={closeAllPopups} />\r\n        </CurrentUserContext.Provider>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import baseUrl from './const';\r\n\r\nexport default function useAuth() {\r\n\r\n  const handleResponse = (res) => {\r\n    const answer = res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\r\n    return answer;\r\n  };\r\n\r\n  return {\r\n    signup({ password, email }) {\r\n      return fetch(`${baseUrl}signup`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          password,\r\n          email,\r\n        }),\r\n      }).then(handleResponse);\r\n    },\r\n\r\n    signin({ password, email }) {\r\n      return fetch(`${baseUrl}signin`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          password,\r\n          email,\r\n        }),\r\n      }).then(handleResponse);\r\n    },\r\n\r\n    signout() {\r\n      return fetch(`${baseUrl}signout`, {\r\n        method: 'GET',\r\n        credentials: 'include',\r\n      }).then(handleResponse);\r\n    }\r\n  }\r\n}\r\n\r\n","import baseUrl from './const';\r\n\r\nexport default function useApiUser() {\r\n\r\n  const handleResponse = (res) => {\r\n    const answer = res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\r\n    return answer;\r\n  };\r\n\r\n  return {\r\n    getUserInfo() {\r\n      return fetch(`${baseUrl}users/me`, {\r\n        method: 'GET',\r\n        credentials: 'include',\r\n      }).then(handleResponse);\r\n    },\r\n\r\n    checkToken() {\r\n      return fetch(`${baseUrl}check`, {\r\n        method: 'GET',\r\n        credentials: 'include',\r\n      }).then(res => res.ok);\r\n    },\r\n\r\n    setUserInfo(data) {\r\n      return fetch(`${baseUrl}users/me`, {\r\n        method: 'PATCH',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          name: data.name,\r\n          about: data.about,\r\n        }),\r\n      }).then(handleResponse);\r\n    },\r\n\r\n    uploadAvatar(link) {\r\n      return fetch(`${baseUrl}users/me/avatar`, {\r\n        method: 'PATCH',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          avatar: link,\r\n        }),\r\n      }).then(handleResponse);\r\n    },\r\n  }\r\n}\r\n","import baseUrl from './const';\r\n\r\nexport default function useApiCard() {\r\n  const handleResponse = (res) => {\r\n    const answer = res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\r\n    return answer;\r\n  };\r\n\r\n  return {\r\n    getCards() {\r\n      return fetch(`${baseUrl}cards`, {\r\n        method: 'GET',\r\n        credentials: 'include',\r\n      }).then(handleResponse);\r\n    },\r\n\r\n    postCard(card) {\r\n      return fetch(`${baseUrl}cards`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          name: card.name,\r\n          link: card.link,\r\n        }),\r\n      }).then(handleResponse);\r\n    },\r\n\r\n    removeCard(card) {\r\n      return fetch(`${baseUrl}cards/${card._id}`, {\r\n        method: 'DELETE',\r\n        credentials: 'include',\r\n      }).then(handleResponse);\r\n    },\r\n\r\n    setLike(card) {\r\n      return fetch(`${baseUrl}cards/${card._id}/likes`, {\r\n        method: 'PUT',\r\n        credentials: 'include',\r\n      }).then(handleResponse);\r\n    },\r\n\r\n    removeLike(card) {\r\n      return fetch(`${baseUrl}cards/${card._id}/likes`, {\r\n        method: 'DELETE',\r\n        credentials: 'include',\r\n      }).then(handleResponse);\r\n    }\r\n\r\n  }\r\n}\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n        <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\nreportWebVitals();\r\n"],"sourceRoot":""}