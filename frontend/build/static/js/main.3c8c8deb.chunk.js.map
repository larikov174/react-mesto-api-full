{"version":3,"sources":["contexts/CurrentUserContext.js","contexts/AuthContext.js","components/ProtectedRoute.js","utils/api.js","utils/useAuth.js","components/Header.js","components/Card.js","components/Main.js","components/AuthForm.js","components/Login.js","components/Register.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeletePlacePopup.js","components/ImagePopup.js","components/InfoTooltip.js","components/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","AuthContext","ProtectedRoute","children","useContext","to","replace","api","token","link","_handleResponse","res","ok","json","Promise","reject","status","this","_token","_link","fetch","headers","Authorization","then","data","method","body","JSON","stringify","name","about","card","_id","authorization","avatar","all","_getUserInfo","_getInitCards","useAuth","baseUrl","handleResponse","signUp","password","email","signIn","checkToken","Accept","Header","onSignOut","location","useLocation","pathname","authed","useState","linkDest","setLinkDest","linkTitle","setLinkTitle","menuOpened","setMenuOpened","userEmail","localStorage","getItem","handleSignOut","useEffect","className","onClick","title","type","Card","onCardClick","onCardLike","onCardDelete","currentUser","isLiked","likes","some","i","cardLikeButtonClassName","isOwn","owner","cardDeleteButtonClassName","src","alt","role","length","Main","cards","onEditProfile","onAddPlace","onEditAvatar","map","item","cardId","AuthForm","onSubmit","renderSignInLink","Login","onLogin","setEmail","setPassword","buttonTitle","setButtonTitle","e","preventDefault","onChange","target","value","placeholder","required","Register","onSignUp","Footer","PopupWithForm","isOpen","onClose","btnCaption","id","evt","currentTarget","EditProfilePopup","onUpdateUser","setName","description","setDescription","catch","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","useRef","current","ref","setLink","DeletePlacePopup","ImagePopup","InfoTooltip","noteType","titles","App","isEditProfilePopupState","setIsEditProfilePopupState","isAddPlacePopupState","setIsAddPlacePopupState","isDeletePlacePopupState","setIsDeletePlacePopupState","isEditAvatarPopupState","setIsEditAvatarPopupState","isImgPopupState","setIsImgPopupState","isInfoTooltipState","setIsInfoTooltipState","isAuthOk","setIsAuthOk","selectedCard","setSelectedCard","setCurrentUser","setCards","errorShow","err","console","error","setAuthed","jwt","navigate","useNavigate","closeAllPopups","setItem","getInitData","userData","initCards","escHandler","key","document","addEventListener","removeEventListener","handleUpdateUser","newInfo","a","setUserInfo","handleUpdateAvatar","uploadAvatar","handleAddPlaceSubmit","postCard","handleDeletePlaceSubmit","removeCard","filter","handleSignIn","handleSignUp","Provider","removeItem","path","element","update","newCard","mappedCard","removeLike","setLike","AddPlacePopup","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3c8c8deb.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst CurrentUserContext = React.createContext();\r\n\r\nexport default CurrentUserContext;\r\n","import React from 'react';\r\n\r\nconst AuthContext = React.createContext();\r\n\r\nexport default AuthContext;\r\n","import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport AuthContext from '../contexts/AuthContext';\r\n\r\nfunction ProtectedRoute({ children }) {\r\n  const authed = React.useContext(AuthContext);\r\n  return authed ? children : <Navigate to=\"./sign-in\" replace />;\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","class Api {\r\n  constructor({ token, link }) {\r\n    this._token = token;\r\n    this._link = link;\r\n  }\r\n\r\n  _handleResponse = (res) => {\r\n    const answer = res.ok\r\n      ? res.json()\r\n      : Promise.reject(`Ошибка: ${res.status}`);\r\n    return answer;\r\n  }\r\n\r\n  _getInitCards() {\r\n    return fetch(`${this._link}cards`, {\r\n      headers: {\r\n        Authorization: this._token,\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  _getUserInfo() {\r\n    return fetch(`${this._link}users/me`, {\r\n      headers: {\r\n        Authorization: this._token,\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  setUserInfo(data) {\r\n    return fetch(`${this._link}users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        Authorization: this._token,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about,\r\n      }),\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  postCard(card) {\r\n    return fetch(`${this._link}cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        Authorization: this._token,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        name: card.name,\r\n        link: card.link,\r\n      }),\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  removeCard(card) {\r\n    return fetch(`${this._link}cards/${card._id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  setLike(card) {\r\n    return fetch(`${this._link}cards/likes/${card._id}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  removeLike(card) {\r\n    return fetch(`${this._link}cards/likes/${card._id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  uploadAvatar(link) {\r\n    return fetch(`${this._link}users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: link,\r\n      }),\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  getInitData() {\r\n    return Promise.all([this._getUserInfo(), this._getInitCards()]);\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  token: 'c4b6220d-e8d9-4ddd-adea-4fda80f87475',\r\n  link: 'https://api.larikov.nomoredomains.rocks/',\r\n});\r\n\r\nexport default api;\r\n","function useAuth() {\r\n  const baseUrl = 'https://api.larikov.nomoredomains.rocks/';\r\n  const handleResponse = (res) => {\r\n    const answer = res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\r\n    return answer;\r\n  };\r\n\r\n  return {\r\n    signUp({ password, email }) {\r\n      return fetch(`${baseUrl}signup`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          password,\r\n          email,\r\n        }),\r\n      }).then(handleResponse);\r\n    },\r\n\r\n    signIn({ password, email }) {\r\n      return fetch(`${baseUrl}signin`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          password,\r\n          email,\r\n        }),\r\n      }).then(handleResponse);\r\n    },\r\n\r\n    checkToken(token) {\r\n      return fetch(`${baseUrl}users/me`, {\r\n        method: 'GET',\r\n        headers: {\r\n          Accept: 'application/json',\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }).then(handleResponse);\r\n    },\r\n  };\r\n}\r\n\r\nexport default useAuth;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport AuthContext from '../contexts/AuthContext';\r\n\r\nfunction Header({ onSignOut }) {\r\n  const location = useLocation().pathname;\r\n  const authed = React.useContext(AuthContext);\r\n  const [linkDest, setLinkDest] = useState('/sign-in');\r\n  const [linkTitle, setLinkTitle] = useState();\r\n  const [menuOpened, setMenuOpened] = useState(false);\r\n  const userEmail = localStorage.getItem('email');\r\n  const handleSignOut = () => {\r\n    setMenuOpened(false);\r\n    onSignOut();\r\n  };\r\n  const renderBurger = () => setMenuOpened(!menuOpened);\r\n  const renderLink = () => {\r\n    if (!authed && location === '/sign-in') {\r\n      setLinkTitle('Регистрация');\r\n      setLinkDest('/sign-up');\r\n    } else if (!authed && location === '/sign-up') {\r\n      setLinkTitle('Войти');\r\n      setLinkDest('/sign-in');\r\n    } else {\r\n      setLinkTitle('Выйти');\r\n      setLinkDest('/sign-in');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    renderLink();\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <div className={`burger ${menuOpened ? 'burger_type_active' : ''}`}>\r\n        <p className=\"burger__text\">{userEmail}&nbsp;</p>\r\n        <Link className=\"burger__link\" to={linkDest} onClick={handleSignOut}>\r\n          {linkTitle}\r\n        </Link>\r\n      </div>\r\n      <header className=\"header\">\r\n        <div className=\"header__logo\" title=\"Mesto\" />\r\n        <div className=\"header__actions\">\r\n          <p className=\"header__text\">{userEmail}&nbsp;</p>\r\n          <Link\r\n            to={linkDest}\r\n            className={`header__link ${authed && 'header__link_idle-on-mobile'}`}\r\n            onClick={handleSignOut}\r\n          >\r\n            {linkTitle}\r\n          </Link>\r\n          <button\r\n            className={`${authed ? 'header__burger' : 'header__burger_idle'} ${\r\n              menuOpened ? 'header__burger_type_close' : ''\r\n            }\r\n            `}\r\n            type=\"button\"\r\n            onClick={renderBurger}\r\n          />\r\n        </div>\r\n      </header>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n  const cardLikeButtonClassName = `card__like-button ${isLiked && 'card__like-button_active'}`;\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = `card__delete-button ${\r\n    isOwn ? 'card__delete-button_visible' : 'card__delete-button_hidden'\r\n  }`;\r\n\r\n  return (\r\n    <li className=\"card\">\r\n      <img className=\"card__image\" src={card.link} alt={card.name} />\r\n      <div\r\n        role=\"presentation\"\r\n        className=\"card__overlay\"\r\n        onClick={() => {\r\n          onCardClick({ src: card.link, title: card.name });\r\n        }}\r\n      />\r\n      <button\r\n        className={cardDeleteButtonClassName}\r\n        type=\"button\"\r\n        onClick={() => {\r\n          onCardDelete(card);\r\n        }}\r\n      />\r\n      <div className=\"card__items\">\r\n        <h2 className=\"card__caption\">{card.name}</h2>\r\n        <div className=\"card__like-block\">\r\n          <button\r\n            className={cardLikeButtonClassName}\r\n            type=\"button\"\r\n            onClick={() => {\r\n              onCardLike(card, isLiked);\r\n            }}\r\n          />\r\n          <p className=\"card__like-counter\">{card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport Card from './Card';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({\r\n  cards,\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onEditAvatar,\r\n  onCardClick,\r\n  onCardLike,\r\n  onCardDelete,\r\n}) {\r\n  const { name, about, avatar } = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <>\r\n      <main>\r\n        <section className=\"profile\">\r\n          <div className=\"profile__avatar-overlay\" onClick={onEditAvatar} role=\"presentation\">\r\n            <img className=\"profile__avatar\" src={avatar} alt=\"Аватар\" />\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <h1 className=\"profile__title\">{name}</h1>\r\n            <p className=\"profile__subtitle\">{about}</p>\r\n            <button className=\"profile__edit-button\" type=\"button\" onClick={onEditProfile} />\r\n          </div>\r\n          <button className=\"profile__add-button\" type=\"button\" onClick={onAddPlace} />\r\n        </section>\r\n\r\n        <section>\r\n          <ul className=\"cards\">\r\n            {cards.map((item) => (\r\n              <Card\r\n                card={item}\r\n                key={item._id}\r\n                cardId={item._id}\r\n                onCardClick={onCardClick}\r\n                onCardLike={onCardLike}\r\n                onCardDelete={onCardDelete}\r\n              />\r\n            ))}\r\n          </ul>\r\n        </section>\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\nimport { useLocation, Link } from 'react-router-dom';\r\n\r\nexport default function AuthForm({ children, onSubmit }) {\r\n  const location = useLocation().pathname;\r\n  const renderSignInLink = (\r\n    <div className=\"login__actions\">\r\n      <p className=\"login__text\">Уже зарегистрированы?&nbsp;</p>\r\n      <Link className=\"login__link\" to=\"/sign-in\">\r\n        Войти\r\n      </Link>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <form className=\"login\" onSubmit={onSubmit}>\r\n      {children}\r\n      {location === '/sign-up' && renderSignInLink}\r\n    </form>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport AuthForm from './AuthForm';\r\n\r\nexport default function Login({ onLogin }) {\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [buttonTitle, setButtonTitle] = useState('Войти');\r\n  const onEmailChange = (e) => setEmail(e.target.value);\r\n  const onPassChange = (e) => setPassword(e.target.value);\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n    setButtonTitle('Обработка...');\r\n    onLogin({ password, email })\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AuthForm className=\"login\" onSubmit={handleLogin}>\r\n        <h2 className=\"login__title\">Вход</h2>\r\n        <input\r\n          className=\"login__input\"\r\n          onChange={onEmailChange}\r\n          name=\"email\"\r\n          type=\"email\"\r\n          title=\"email\"\r\n          value={email || ''}\r\n          placeholder=\"Email\"\r\n          required\r\n        />\r\n        <input\r\n          className=\"login__input\"\r\n          onChange={onPassChange}\r\n          name=\"password\"\r\n          type=\"password\"\r\n          title=\"Пароль\"\r\n          value={password || ''}\r\n          placeholder=\"Пароль\"\r\n          required\r\n        />\r\n        <button className=\"login__button\" type=\"submit\">\r\n          {buttonTitle}\r\n        </button>\r\n      </AuthForm>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport AuthForm from './AuthForm';\r\n\r\nexport default function Register({ onSignUp }) {\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [buttonTitle, setButtonTitle] = useState('Зарегистрироваться');\r\n\r\n  const onEmailChange = (e) => setEmail(e.target.value);\r\n  const onPassChange = (e) => setPassword(e.target.value);\r\n\r\n  const handleSignUp = (e) => {\r\n    e.preventDefault();\r\n    setButtonTitle('Обработка...');\r\n    onSignUp({ password, email })\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AuthForm className=\"login\" onSubmit={handleSignUp}>\r\n        <h2 className=\"login__title\">Регистрация</h2>\r\n        <input\r\n          className=\"login__input\"\r\n          onChange={onEmailChange}\r\n          name=\"email\"\r\n          type=\"email\"\r\n          title=\"email\"\r\n          value={email || ''}\r\n          placeholder=\"Email\"\r\n          required\r\n        />\r\n        <input\r\n          className=\"login__input\"\r\n          onChange={onPassChange}\r\n          name=\"password\"\r\n          type=\"password\"\r\n          title=\"Пароль\"\r\n          value={password || ''}\r\n          placeholder=\"Пароль\"\r\n          required\r\n        />\r\n        <button className=\"login__button\" type=\"submit\">\r\n          {buttonTitle}\r\n        </button>\r\n      </AuthForm>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <h2 className=\"footer__copyright\">&copy; 2021 Mesto Russia</h2>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\n\r\nfunction PopupWithForm({ title, name, children, isOpen, onClose, btnCaption, onSubmit }) {\r\n  const handleOverlayClick = (evt) => evt.target === evt.currentTarget && onClose();\r\n\r\n  return (\r\n    <div\r\n      id={name}\r\n      className={`popup ${isOpen ? 'popup_opened' : ''}`}\r\n      role=\"presentation\"\r\n      onClick={handleOverlayClick}\r\n    >\r\n      <form className=\"popup__container popup__container_data\" name={name} onSubmit={onSubmit}>\r\n        <div className=\"popup__window\">\r\n          <button\r\n            className=\"popup__close-button\"\r\n            type=\"button\"\r\n            name=\"closePopup\"\r\n            onClick={onClose}\r\n          />\r\n          <h2 className=\"popup__title\">{title}</h2>\r\n          {children}\r\n          <button className=\"popup__submit-button\" type=\"submit\" name=\"submitPopup\">\r\n            {btnCaption}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const [buttonTitle, setButtonTitle] = useState('Сохранить');\r\n  const [name, setName] = useState(currentUser.name);\r\n  const [description, setDescription] = useState(currentUser.about);\r\n  const handleNameChange = (e) => setName(e.target.value);\r\n  const handleDescrChange = (e) => setDescription(e.target.value);\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setButtonTitle('Обработка...');\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    })\r\n      .then(() => setButtonTitle('Сохранить'))\r\n      .catch(() => setButtonTitle('Ошибка!'));\r\n  };\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profileForm\"\r\n      title=\"Редактировать профиль\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      btnCaption={buttonTitle}\r\n    >\r\n      <input\r\n        id=\"inputProfileName\"\r\n        className=\"popup__input\"\r\n        name=\"name\"\r\n        value={name || ''}\r\n        onChange={handleNameChange}\r\n        type=\"text\"\r\n        title=\"имя автора\"\r\n        placeholder=\"введите имя автора\"\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        required\r\n      />\r\n      <input\r\n        id=\"inputProfileWork\"\r\n        className=\"popup__input\"\r\n        name=\"work\"\r\n        value={description || ''}\r\n        onChange={handleDescrChange}\r\n        type=\"text\"\r\n        title=\"вид деятельности\"\r\n        placeholder=\"введите вид деятельности\"\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        required\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n  const [buttonTitle, setButtonTitle] = React.useState('Сохранить');\r\n  const link = React.useRef();\r\n  const resetInput = () => {\r\n    link.current.value = '';\r\n    setButtonTitle('Сохранить');\r\n  };\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setButtonTitle('Обработка...');\r\n    onUpdateAvatar({\r\n      avatar: link.current.value,\r\n    })\r\n      .then(() => resetInput())\r\n      .catch(() => setButtonTitle('Ошибка!'));\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"avatarForm\"\r\n      title=\"Обновить аватар\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      btnCaption={buttonTitle}\r\n    >\r\n      <input\r\n        id=\"inputLink\"\r\n        className=\"popup__input\"\r\n        name=\"link\"\r\n        type=\"url\"\r\n        title=\"укажите путь\"\r\n        ref={link}\r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React, { useState } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onAddPlace }) {\r\n  const [name, setName] = useState('');\r\n  const [link, setLink] = useState('');\r\n  const [buttonTitle, setButtonTitle] = useState('Создать');\r\n  const handleNameChange = (e) => setName(e.target.value);\r\n  const handleLinkChange = (e) => setLink(e.target.value);\r\n  const resetInput = () => {\r\n    setName('');\r\n    setLink('');\r\n    setButtonTitle('Создать');\r\n  };\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setButtonTitle('Обработка...');\r\n    onAddPlace({ name, link })\r\n      .then(() => resetInput())\r\n      .catch(() => setButtonTitle('Ошибка!'));\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"placeForm\"\r\n      title=\"Новое место\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      btnCaption={buttonTitle}\r\n    >\r\n      <input\r\n        id=\"inputPlaceName\"\r\n        className=\"popup__input\"\r\n        name=\"name\"\r\n        type=\"text\"\r\n        value={name || ''}\r\n        onChange={handleNameChange}\r\n        title=\"назовите место\"\r\n        placeholder=\"Название\"\r\n        minLength=\"2\"\r\n        maxLength=\"30\"\r\n        required\r\n      />\r\n      <input\r\n        id=\"inputPlaceLink\"\r\n        className=\"popup__input\"\r\n        name=\"link\"\r\n        type=\"url\"\r\n        value={link || ''}\r\n        onChange={handleLinkChange}\r\n        title=\"укажите путь\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction DeletePlacePopup({ isOpen, onClose, onCardDelete }) {\r\n  const [buttonTitle, setButtonTitle] = React.useState('Да');\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setButtonTitle('Обработка...');\r\n    onCardDelete()\r\n      .then(() => setButtonTitle('Да'))\r\n      .catch(() => setButtonTitle('Ошибка!'));\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"cardDeleteForm\"\r\n      title=\"Вы уверены?\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      btnCaption={buttonTitle}\r\n    />\r\n  );\r\n}\r\n\r\nexport default DeletePlacePopup;\r\n","import React from 'react';\r\n\r\nfunction ImagePopup({ card, isOpen, onClose }) {\r\n  const handleOverlayClick = (evt) => evt.target === evt.currentTarget && onClose();\r\n\r\n  return (\r\n    <div\r\n      id=\"imageWindow\"\r\n      className={`popup ${isOpen ? 'popup_opened' : ''}`}\r\n      role=\"presentation\"\r\n      onClick={handleOverlayClick}\r\n    >\r\n      <div className=\"popup__container\">\r\n        <button className=\"popup__close-button\" type=\"button\" onClick={onClose} />\r\n        <figure className=\"popup__figure\">\r\n          <img className=\"popup__pic\" src={card.src} alt={card.title} />\r\n          <figcaption className=\"popup__figcaption\">{card.title}</figcaption>\r\n        </figure>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","import React from 'react';\r\n\r\nexport default function InfoTooltip({ isOpen, onClose, noteType }) {\r\n  const titles = {\r\n    pass: 'Вы успешно зарегистрировались!',\r\n    fail: 'Что-то пошло не так! Попробуйте ещё раз.',\r\n  };\r\n  const handleOverlayClick = (evt) => evt.target === evt.currentTarget && onClose();\r\n\r\n  return (\r\n    <div\r\n      id=\"infoTooltip\"\r\n      className={`popup ${isOpen ? 'popup_opened' : ''}`}\r\n      role=\"presentation\"\r\n      onClick={handleOverlayClick}\r\n    >\r\n      <div className=\"popup__container popup__container_data\">\r\n        <div className=\"popup__window\">\r\n          <button\r\n            className=\"popup__close-button\"\r\n            type=\"button\"\r\n            name=\"closePopup\"\r\n            onClick={onClose}\r\n          />\r\n          <div className={`popup__toolTip-image ${!noteType && 'popup__toolTip-image_fail'}`} />\r\n          <h2 className=\"popup__title popup__toolTip-title\">\r\n            {noteType ? titles.pass : titles.fail}\r\n          </h2>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Routes, Route, useNavigate } from 'react-router-dom';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\nimport AuthContext from '../contexts/AuthContext';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport api from '../utils/api';\r\nimport useAuth from '../utils/useAuth';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport Footer from './Footer';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport DeletePlacePopup from './DeletePlacePopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport InfoTooltip from './InfoTooltip';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupState, setIsEditProfilePopupState] = useState(false);\r\n  const [isAddPlacePopupState, setIsAddPlacePopupState] = useState(false);\r\n  const [isDeletePlacePopupState, setIsDeletePlacePopupState] = useState(false);\r\n  const [isEditAvatarPopupState, setIsEditAvatarPopupState] = useState(false);\r\n  const [isImgPopupState, setIsImgPopupState] = useState(false);\r\n  const [isInfoTooltipState, setIsInfoTooltipState] = useState(false);\r\n  const [isAuthOk, setIsAuthOk] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const errorShow = (err) => console.error(err);\r\n  const { checkToken, signIn, signUp } = useAuth();\r\n  const [authed, setAuthed] = useState(false);\r\n  const jwt = localStorage.getItem('token');\r\n  const navigate = useNavigate();\r\n  const onLoadUserCheck = (token) => {\r\n    checkToken(token)\r\n      .then((json) => {\r\n        localStorage.setItem('_id', json.data._id);\r\n        localStorage.setItem('email', json.data.email);\r\n        setAuthed(true);\r\n        navigate('/main')\r\n      })\r\n      .catch(errorShow);\r\n  };\r\n\r\n  const closeAllPopups = () => {\r\n    setIsEditProfilePopupState(false);\r\n    setIsAddPlacePopupState(false);\r\n    setIsEditAvatarPopupState(false);\r\n    setIsImgPopupState(false);\r\n    setIsDeletePlacePopupState(false);\r\n    setIsInfoTooltipState(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (jwt !== null) {\r\n      onLoadUserCheck(jwt);\r\n    }\r\n    \r\n    api\r\n      .getInitData()\r\n      .then((data) => {\r\n        const [userData, initCards] = data;\r\n        setCurrentUser(userData);\r\n        setCards(initCards);\r\n      })\r\n      .catch(errorShow);\r\n\r\n    const escHandler = (evt) => evt.key === 'Escape' && closeAllPopups();\r\n    document.addEventListener('keydown', escHandler);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', escHandler);\r\n    };\r\n  }, []);\r\n\r\n  const openEditProfilePopup = () => {\r\n    setIsEditProfilePopupState(true);\r\n  };\r\n\r\n  const openAddPlacePopup = () => {\r\n    setIsAddPlacePopupState(true);\r\n  };\r\n\r\n  const openEditAvatarPopup = () => {\r\n    setIsEditAvatarPopupState(true);\r\n  };\r\n\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard(card);\r\n    setIsImgPopupState(true);\r\n  };\r\n\r\n  const handleLikeClick = (card, isLiked) => {\r\n    const update = (newCard) => {\r\n      setCards(cards.map((mappedCard) => (mappedCard._id === card._id ? newCard : mappedCard)));\r\n    };\r\n    return isLiked\r\n      ? api.removeLike(card).then(update).catch(errorShow)\r\n      : api.setLike(card).then(update).catch(errorShow);\r\n  };\r\n\r\n  const handleUpdateUser = async (newInfo) => {\r\n    await api\r\n      .setUserInfo(newInfo)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        closeAllPopups();\r\n      })\r\n      .catch(errorShow);\r\n  };\r\n\r\n  const handleUpdateAvatar = async ({ avatar }) => {\r\n    await api\r\n      .uploadAvatar(avatar)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        closeAllPopups();\r\n      })\r\n      .catch(errorShow);\r\n  };\r\n\r\n  const handleAddPlaceSubmit = async (card) => {\r\n    await api\r\n      .postCard(card)\r\n      .then((data) => {\r\n        setCards([data, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch(errorShow);\r\n  };\r\n\r\n  const handleDeleteClick = (card) => {\r\n    setSelectedCard(card);\r\n    setIsDeletePlacePopupState(true);\r\n  };\r\n\r\n  const handleDeletePlaceSubmit = async () => {\r\n    await api\r\n      .removeCard(selectedCard)\r\n      .then(() => {\r\n        setCards((data) => data.filter((card) => card._id !== selectedCard._id));\r\n        closeAllPopups();\r\n      })\r\n      .catch(errorShow);\r\n  };\r\n\r\n  const handleSignIn = async ({ password, email }) => {\r\n    await signIn({ password, email })\r\n      .then((json) => {\r\n        setAuthed(true);\r\n        localStorage.setItem('email', email);\r\n        localStorage.setItem('token', json.token);\r\n        navigate('/main');\r\n      })\r\n      .catch(() => {\r\n        setAuthed(false);\r\n        setIsAuthOk(false);\r\n        setIsInfoTooltipState(true);\r\n      });\r\n  };\r\n\r\n  const handleSignUp = async ({ password, email }) => {\r\n    await signUp({ password, email })\r\n      .then(() => {\r\n        setIsAuthOk(true);\r\n        setIsInfoTooltipState(true);\r\n        navigate('/sign-in');\r\n      })\r\n      .catch(() => {\r\n        setAuthed(false);\r\n        setIsAuthOk(false);\r\n        setIsInfoTooltipState(true);\r\n      });\r\n  };\r\n\r\n  const handleSignOut = () => {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('email');\r\n      localStorage.removeItem('_id');\r\n      setAuthed(false);\r\n  }\r\n\r\n  return (\r\n    <div className=\"body\">\r\n      <div className=\"page\">\r\n        <CurrentUserContext.Provider value={currentUser}>\r\n          <AuthContext.Provider value={authed}>\r\n            <Header onSignOut={handleSignOut} />\r\n            <Routes>\r\n              <Route path=\"/sign-in\" element={<Login onLogin={handleSignIn} />} />\r\n              <Route path=\"/sign-up\" element={<Register onSignUp={handleSignUp} />} />\r\n              <Route\r\n                path=\"/*\"\r\n                element={\r\n                  <ProtectedRoute>\r\n                    <Main\r\n                      onEditProfile={openEditProfilePopup}\r\n                      onAddPlace={openAddPlacePopup}\r\n                      onEditAvatar={openEditAvatarPopup}\r\n                      onCardClick={handleCardClick}\r\n                      onCardLike={handleLikeClick}\r\n                      onCardDelete={handleDeleteClick}\r\n                      cards={cards}\r\n                    />\r\n                  </ProtectedRoute>\r\n                }\r\n              />\r\n            </Routes>\r\n            <Footer />\r\n            <EditProfilePopup\r\n              isOpen={isEditProfilePopupState}\r\n              onUpdateUser={handleUpdateUser}\r\n              onClose={closeAllPopups}\r\n            />\r\n            <EditAvatarPopup\r\n              isOpen={isEditAvatarPopupState}\r\n              onUpdateAvatar={handleUpdateAvatar}\r\n              onClose={closeAllPopups}\r\n            />\r\n            <AddPlacePopup\r\n              isOpen={isAddPlacePopupState}\r\n              onAddPlace={handleAddPlaceSubmit}\r\n              onClose={closeAllPopups}\r\n            />\r\n            <DeletePlacePopup\r\n              isOpen={isDeletePlacePopupState}\r\n              onCardDelete={handleDeletePlaceSubmit}\r\n              onClose={closeAllPopups}\r\n            />\r\n            <ImagePopup card={selectedCard} isOpen={isImgPopupState} onClose={closeAllPopups} />\r\n            <InfoTooltip isOpen={isInfoTooltipState} onClose={closeAllPopups} noteType={isAuthOk} />\r\n          </AuthContext.Provider>\r\n        </CurrentUserContext.Provider>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n        <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\nreportWebVitals();\r\n"],"sourceRoot":""}